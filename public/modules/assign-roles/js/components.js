(()=>{"use strict";var e={n:t=>{var i=t&&t.__esModule?()=>t.default:()=>t;return e.d(i,{a:i}),i},d:(t,i)=>{for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e,t,i,n,r,o,s,l){var a,u="function"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=i,u._compiled=!0),n&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),s?(a=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},u._ssrRegister=a):r&&(a=l?function(){r.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:r),a)if(u.functional){u._injectStyles=a;var c=u.render;u.render=function(e,t){return a.call(t),c(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,a):[a]}return{exports:e,options:u}}const i=t({name:"VHelpText",props:{id:{type:String,required:!0},help:{type:String,required:!0}}},(function(){var e=this,t=e.$createElement;return(e._self._c||t)("p",{staticClass:"mt-2 text-gray-600 text-xs italic",attrs:{id:e.id},domProps:{textContent:e._s(e.help)}})}),[],!1,null,null,null).exports;var n=t({name:"VError",props:{error:{type:String,required:!0}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",{staticClass:"text-red-500 text-xs italic"},[i("span",{staticClass:"sr-only"},[e._v("Validation failed:")]),e._v(" "+e._s(e.error))])}),[],!1,null,"11d967e4",null);const r=t({name:"VFormLabel",components:{VHelpText:i,VError:n.exports},props:{id:{type:String,required:!0},title:{type:String,required:!1},required:{type:Boolean,required:!1,default:!1},help:{type:String,required:!1},tooltip:{type:String,required:!1},errors:{type:Array,required:!1,default:()=>[]}},computed:{hasHelp(){return!!this.help}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"relative mt-4"},[e._t("preLabel"),e._v(" "),e.title?i("label",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,animation:"fade",placement:"top-start",arrow:!0,interactive:!0,onShow:function(){return!!e.tooltip}},expression:"{ arrow: true, animation: 'fade', placement: 'top-start', arrow: true, interactive: true, onShow: () => !!tooltip }"}],staticClass:"text-base leading-7 text-blueGray-500",attrs:{content:e.tooltip,for:e.id,tabindex:"-1"}},[i("span",{staticClass:"inline-flex"},[e._v(e._s(e.title)+"\n        "),e.required?i("span",[i("span",{staticClass:"not-sr-only"},[e._v(" *")]),e._v(" "),i("span",{staticClass:"sr-only"},[e._v("Required")])]):e._e(),e._v(" "),e.tooltip?i("svg",{staticClass:"h-4 w-4",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"}},[i("path",{attrs:{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"}})]):e._e()])]):e._e(),e._v(" "),e._t("default"),e._v(" "),e.hasHelp?i("v-help-text",{attrs:{id:e.id+"-help-text",help:e.help}}):e._e(),e._v(" "),e._l(e.errors,(function(t){return e.errors?i("div",{attrs:{id:e.id+"-errors"}},[i("v-error",{attrs:{error:t}})],1):e._e()}))],2)}),[],!1,null,"21d7d288",null).exports,o={props:{id:{type:String,required:!0},errorKey:{type:String,required:!1},label:{validator:e=>null===e||"string"==typeof e,required:!1},required:{type:Boolean,required:!1},visible:{type:Boolean,required:!1,default:!0},hint:{validator:e=>null===e||"string"==typeof e,required:!1},tooltip:{validator:e=>null===e||"string"==typeof e,required:!1},value:{required:!1,default:null},errors:{required:!1,type:Array,default:()=>[]}},components:{VFormLabel:r},watch:{errors(e){this.recheckErrors()}},methods:{setValue(e){this.$emit("input",e)},recheckErrors(){this.formErrors=(this.$ui.errors.has(this.errorKeyValue)?this.$ui.errors.get(this.errorKeyValue):[]).concat(this.errors)}},created(){this.$ui.eventBus.$on("errors-updated",(()=>this.recheckErrors())),this.recheckErrors()},data:()=>({formErrors:[]}),computed:{ariaDescribedBy(){let e=[];return this.hasHelp&&e.push(this.id+"-help-text"),this.formErrors.length>0&&e.push(this.id+"-errors"),0===e.length?null:e.join(" ")},isInvalid(){return!this.isValid},isValid(){return 0===this.formErrors.length},name(){return this.id},title(){return this.label},hasTooltip(){return null!==this.tooltip},hasHint(){return null!==this.hint},help(){return this.hint},dynamicValue:{get(){return this.value},set(e){this.setValue(e)}},labelProps(){let e={id:this.id,title:this.title,required:this.required,help:this.help,tooltip:this.tooltip,errors:this.formErrors};return Object.fromEntries(Object.entries(e).filter((([e,t])=>null!==t)))},errorKeyValue(){return this.errorKey?this.errorKey:this.id},componentStyling(){return{"border-danger-dark border-2":this.isInvalid,"border-2":!this.isInvalid}}}};var s=t({name:"PositionSetting",props:{positions:{type:Array,required:!1,default:function(){return[]}},value:{required:!1,type:Object,default:function(){return{}}},logicId:{required:!0,type:Number}},data:function(){return{settings:{allowed:[],only_one_role:[],only_one_user:[],user_only_has_one_role:[]}}},mounted:function(){void 0!==this.value&&(this.value.hasOwnProperty("allowed")&&(this.settings.allowed=this.value.allowed),this.value.hasOwnProperty("only_one_role")&&(this.settings.only_one_role=this.value.only_one_role),this.value.hasOwnProperty("only_one_user")&&(this.settings.only_one_user=this.value.only_one_user),this.value.hasOwnProperty("user_only_has_one_role")&&(this.settings.user_only_has_one_role=this.value.user_only_has_one_role))},watch:{settings:{deep:!0,handler:function(){this.updateValues()}}},methods:{updateValues:function(){this.$emit("input",{logic_id:this.logicId,allowed:this.settings.allowed,only_one_role:this.settings.only_one_role,only_one_user:this.settings.only_one_user,user_only_has_one_role:this.settings.user_only_has_one_role})}},computed:{form:function(){var e=this.positions.map((function(e){return{id:e.id,text:e.data.name}}));return this.$tools.generator.form.newForm().withGroup(this.$tools.generator.group.newGroup().withField(this.$tools.generator.field.checkList("allowed").label("Allowed Positions").hint("These positions are able to be assigned to committee members").setOptions(e)).withField(this.$tools.generator.field.checkList("only_one_role").label("Only one role").hint("These positions may only belong to a single role. If used, a new role cannot be created with this position.").setOptions(e)).withField(this.$tools.generator.field.checkList("only_one_user").label("Only one user").hint("Roles with these positions may only have a single user assigned to them. Once one user is assigned, another cannot be.").setOptions(e)).withField(this.$tools.generator.field.checkList("user_only_has_one_role").label("User only has one role").hint("A user assigned to a role with this position cannot be assigned to anything else.").setOptions(e))).generate().asJson()}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("p-dynamic-form",{attrs:{schema:e.form},model:{value:e.settings,callback:function(t){e.settings=t},expression:"settings"}})],1)}),[],!1,null,"96cfc7ea",null);const l=t({name:"PositionSettings",components:{PositionSetting:s.exports},mixins:[o],props:{logic:{required:!1,type:Array,default:function(){return[]}},positions:{required:!1,type:Array,default:function(){return[]}}},data:function(){return{newlySelectedLogic:[],logicToAdd:null}},methods:{logicName:function(e){var t=this.logic.filter((function(t){return t.id===e}));return t.length>0?t[0].name:"Logic #"+e},addLogic:function(){this.newlySelectedLogic.push(this.logicToAdd),this.logicToAdd=null},getValue:function(e){return this.checkValueExists(),this.dynamicValue.filter((function(t){return t.logic_id===e})).length>0?this.dynamicValue.filter((function(t){return t.logic_id===e}))[0]:{}},setValue:function(e,t){this.checkValueExists(),-1!==this.newlySelectedLogic.indexOf(e)&&this.newlySelectedLogic.splice(this.newlySelectedLogic.indexOf(e),1),this.dynamicValue.filter((function(t){return t.logic_id===e})).length>0?this.dynamicValue[this.dynamicValue.indexOf(this.dynamicValue.filter((function(t){return t.logic_id===e}))[0])]=t:this.dynamicValue.push(t)},checkValueExists:function(){void 0!==this.dynamicValue&&null!==this.dynamicValue||(this.dynamicValue=[])}},computed:{logicSelectOptions:function(){var e=this;return this.logic.filter((function(t){return-1===e.selectedLogic.indexOf(t.id)})).map((function(e){return{id:e.id,value:e.name}}))},selectedLogic:function(){return this.checkValueExists(),this.dynamicValue.map((function(e){return e.logic_id})).concat(this.newlySelectedLogic)}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%"}},[i("p-tabs",[i("p-tab",{key:"add",attrs:{title:"Add Logic"}},[i("p-select",{attrs:{id:"logic-select-options",title:"Setting group",hint:"The group that the position settings will apply to",tooltip:"The position settings control which positions can be assigned. The settings will come from the group the user is in.",selectOptions:e.logicSelectOptions},model:{value:e.logicToAdd,callback:function(t){e.logicToAdd=t},expression:"logicToAdd"}}),e._v(" "),null!==e.logicToAdd?i("p-button",{attrs:{variant:"secondary"},on:{click:e.addLogic}},[e._v("Add")]):e._e()],1),e._v(" "),e._l(e.selectedLogic,(function(t){return i("p-tab",{key:t,attrs:{title:e.logicName(t)}},[i("position-setting",{attrs:{logicId:t,positions:e.positions,value:e.getValue(t)},on:{input:function(i){return e.setValue(t,i)}}})],1)}))],2)],1)}),[],!1,null,"b37c57f6",null).exports;var a=t({name:"RequiredPosition",props:{positions:{type:Array,required:!1,default:function(){return[]}},value:{required:!1,type:Object,default:function(){return{}}},logicId:{required:!0,type:Number}},data:function(){return{required:{}}},mounted:function(){void 0!==this.value&&this.value.hasOwnProperty("required")&&(this.required=this.value.required)},watch:{required:{deep:!0,handler:function(){this.updateValues()}}},methods:{updateValues:function(){this.$emit("input",{logic_id:this.logicId,required:this.required.required})}},computed:{form:function(){return this.$tools.generator.form.newForm().withGroup(this.$tools.generator.group.newGroup().withField(this.$tools.generator.field.checkList("required").value([]).label("Required Positions").hint("These positions need to be filled to mark the module as complete").setOptions(this.positions.map((function(e){return{id:e.id,text:e.data.name}}))))).generate().asJson()}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("p-dynamic-form",{attrs:{schema:e.form},model:{value:e.required,callback:function(t){e.required=t},expression:"required"}})],1)}),[],!1,null,"d09ee806",null);const u=t({name:"RequiredPositions",components:{RequiredPosition:a.exports},mixins:[o],props:{logic:{required:!1,type:Array,default:function(){return[]}},positions:{required:!1,type:Array,default:function(){return[]}}},data:function(){return{newlySelectedLogic:[],logicToAdd:null}},methods:{logicName:function(e){var t=this.logic.filter((function(t){return t.id===e}));return t.length>0?t[0].name:"Logic #"+e},addLogic:function(){this.newlySelectedLogic.push(this.logicToAdd),this.logicToAdd=null},getValue:function(e){return this.checkValueExists(),this.dynamicValue.filter((function(t){return t.logic_id===e})).length>0?this.dynamicValue.filter((function(t){return t.logic_id===e}))[0]:{}},setValue:function(e,t){this.checkValueExists(),-1!==this.newlySelectedLogic.indexOf(e)&&this.newlySelectedLogic.splice(this.newlySelectedLogic.indexOf(e),1),this.dynamicValue.filter((function(t){return t.logic_id===e})).length>0?this.dynamicValue[this.dynamicValue.indexOf(this.dynamicValue.filter((function(t){return t.logic_id===e}))[0])]=t:this.dynamicValue.push(t)},checkValueExists:function(){void 0===this.dynamicValue&&(this.dynamicValue=[])}},computed:{logicSelectOptions:function(){var e=this;return this.logic.filter((function(t){return-1===e.selectedLogic.indexOf(t.id)})).map((function(e){return{id:e.id,value:e.name}}))},selectedLogic:function(){return this.checkValueExists(),this.dynamicValue.map((function(e){return e.logic_id})).concat(this.newlySelectedLogic)}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%"}},[i("p-tabs",[i("p-tab",{attrs:{title:"Add Group"}},[i("p-select",{attrs:{id:"logic-select-options",title:"Setting group",hint:"The group that the position settings will apply to",tooltip:"The position settings control which positions can be assigned. The settings will come from the group the user is in.","select-options":e.logicSelectOptions},model:{value:e.logicToAdd,callback:function(t){e.logicToAdd=t},expression:"logicToAdd"}}),e._v(" "),null!==e.logicToAdd?i("p-button",{attrs:{variant:"secondary"},on:{click:e.addLogic}},[e._v("Add")]):e._e()],1),e._v(" "),e._l(e.selectedLogic,(function(t){return i("p-tab",{key:t,attrs:{title:e.logicName(t)}},[i("required-position",{attrs:{logicId:t,positions:e.positions,value:e.getValue(t)},on:{input:function(i){return e.setValue(t,i)}}})],1)}))],2)],1)}),[],!1,null,"219ac9cb",null).exports,c=Toolkit;var d=e.n(c);const h=Vue;var p=e.n(h);p().use(d()),p().component("p-assign-roles-position-settings",l),p().component("p-assign-roles-required-positions",u)})();